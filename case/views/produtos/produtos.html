{% extends 'base.html' %}

{% block css %} 
<link rel="stylesheet" href="{{ url_for('static', filename='css/produtos.css') }}">
{% endblock %}

{% block titulo %} ConstruMais+ - Produtos {% endblock %}

{% block conteudo %}
<main>
    <h1>Lista de Materiais - ConstruMais+</h1>
    <p>Gerencie os materiais e produtos disponíveis para construção.</p>

    <a class="btn" href="{{ url_for('produtos.adicionar') }}">Adicionar Material</a> |
    <a class="btn" href="{{ url_for('auth.logout') }}">Sair</a>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul>
            {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <table border="1" cellpadding="10">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome do Material</th>
                <th>Preço (R$)</th>
                <th>Descrição</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for produto in produtos %}
            <tr>
                <td>{{ produto.id }}</td>
                <td>{{ produto.nome }}</td>
                <td>{{ produto.preco }}</td>
                <td>{{ produto.descricao }}</td>
                <td>
                    <form action="{{ url_for('produtos.remover', item=produto.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="btn-small">Remover</button>
                    </form>
                    <a class="btn-small" href="{{ url_for('produtos.editar', item=produto.id) }}">Editar</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</main>
{% endblock %}